# Supabase 郵件模板配置說明

## 📋 快速配置步驟

### 步驟 1：登入 Supabase Dashboard

1. 前往 https://app.supabase.com/
2. 選擇您的 ChaosRegistry 項目
3. 左側選單 → **Authentication** → **Email Templates**

### 步驟 2：編輯 "Confirm signup" 模板

1. 找到 **"Confirm signup"** 模板
2. 點擊 **"Edit"** 或 **"Customize"** 按鈕

### 步驟 3：設定標題

在 **Subject** 欄位貼上：
```
歡迎加入 ChaosRegistry！請驗證您的郵件地址
```

### 步驟 4：設定內容

在 **Body** 欄位：

**選項 A：完整版模板（推薦）**
- 複製 `verification-email-template.html` 的全部內容
- 貼上到 Body 欄位

**選項 B：簡化版模板**
- 複製 `simple-verification-email.html` 的全部內容
- 貼上到 Body 欄位

### 步驟 5：儲存

1. 點擊 **"Save"** 按鈕
2. 等待幾秒讓 Supabase 更新模板

### 步驟 6：測試

1. 使用測試帳號註冊
2. 檢查收件箱（包括垃圾郵件）
3. 確認郵件內容和驗證連結正常

## ⚠️ 重要注意事項

### 必須保留的變數

模板中 **必須** 包含以下變數，否則用戶無法驗證：

```
{{ .ConfirmationURL }}
```

這個變數會自動替換為實際的驗證連結，**絕對不能刪除或修改**。

### 可選變數

以下變數可以選擇性使用：

- `{{ .Email }}` - 用戶郵件地址
- `{{ .SiteURL }}` - 網站 URL
- `{{ .RedirectTo }}` - 重定向 URL

## 🎨 模板選擇建議

### 完整版模板 (`verification-email-template.html`)

**優點：**
- 專業美觀的設計
- 響應式佈局
- 完整的視覺層次
- 品牌化樣式

**適用於：**
- 正式上線環境
- 需要品牌形象展示
- 重視用戶體驗

### 簡化版模板 (`simple-verification-email.html`)

**優點：**
- 簡潔清晰
- 相容性更好
- 載入速度快
- 易於維護

**適用於：**
- 快速部署
- 測試環境
- 對樣式要求不高的場景

## 🔧 自訂修改

### 修改品牌名稱

在模板中搜尋 `ChaosRegistry` 並替換為您的品牌名稱。

### 修改顏色

搜尋以下顏色代碼並替換：

- `#667eea` - 主色調（藍紫色）
- `#764ba2` - 漸層色（深紫色）

### 修改過期時間

搜尋 `24 小時` 並修改為實際的過期時間。

## 📱 測試檢查清單

配置完成後，請確認：

- [ ] 郵件標題正確顯示
- [ ] 驗證按鈕可以點擊
- [ ] 點擊按鈕後正確跳轉到驗證頁面
- [ ] 備用連結可以複製和使用
- [ ] 在 Gmail 中顯示正常
- [ ] 在 Outlook 中顯示正常
- [ ] 在手機郵件 App 中顯示正常
- [ ] 繁體中文文字正確顯示
- [ ] 沒有顯示 `{{ .ConfirmationURL }}` 原始文字（應該被替換為實際連結）

## 🐛 疑難排解

### 問題 1：郵件沒有收到

**可能原因：**
- 檢查垃圾郵件資料夾
- 確認 Supabase 的 SMTP 設定正確
- 檢查郵件服務商的限制

**解決方法：**
- 檢查 Supabase Dashboard → Settings → Auth → SMTP Settings
- 確認已配置 SMTP 服務（或使用 Supabase 預設服務）

### 問題 2：驗證連結無效

**可能原因：**
- 模板中缺少 `{{ .ConfirmationURL }}` 變數
- 變數格式錯誤

**解決方法：**
- 確認模板中包含 `{{ .ConfirmationURL }}`
- 檢查變數前後是否有空格或換行

### 問題 3：郵件顯示亂碼

**可能原因：**
- 編碼設定錯誤

**解決方法：**
- 確認 HTML 開頭有 `<meta charset="UTF-8">`
- 確認 Supabase 設定為 UTF-8 編碼

### 問題 4：按鈕樣式異常

**可能原因：**
- 某些郵件客戶端不支援某些 CSS

**解決方法：**
- 使用內聯樣式（inline styles）
- 簡化 CSS 屬性
- 使用簡化版模板

## 📞 需要協助？

如果遇到問題，請：
1. 檢查 Supabase Dashboard 的錯誤日誌
2. 查看 Supabase 官方文檔
3. 聯繫 Supabase 支援

## 🔄 更新記錄

- **2025-11-27**: 創建配置說明文檔


