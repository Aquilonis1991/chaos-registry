# å‰µå»º3çµ„ç®¡ç†å“¡å¸³è™Ÿ - åŸ·è¡Œæ­¥é©Ÿ

## ğŸ“‹ æ¦‚è¿°

ç”±æ–¼ Supabase çš„å®‰å…¨é™åˆ¶ï¼Œç„¡æ³•ç›´æ¥é€šé SQL å‰µå»ºç”¨æˆ¶å¸³è™Ÿã€‚éœ€è¦æ‰‹å‹•åœ¨ Supabase Dashboard ä¸­å‰µå»ºï¼Œæˆ–ä½¿ç”¨ Supabase CLIã€‚

## ğŸ”§ æ–¹æ³• 1ï¼šä½¿ç”¨ Supabase Dashboardï¼ˆæ¨è–¦ï¼‰

### æ­¥é©Ÿ 1ï¼šç”Ÿæˆéš¨æ©Ÿå¯†ç¢¼

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ3çµ„éš¨æ©Ÿå¯†ç¢¼ï¼ˆåœ¨ PowerShell ä¸­åŸ·è¡Œï¼‰ï¼š

```powershell
# ç”Ÿæˆç®¡ç†å“¡1çš„å¯†ç¢¼
$password1 = "Admin" + (-join ((65..90) + (48..57) | Get-Random -Count 8 | ForEach-Object {[char]$_}))
Write-Host "ç®¡ç†å“¡1å¯†ç¢¼: $password1"

# ç”Ÿæˆç®¡ç†å“¡2çš„å¯†ç¢¼
$password2 = "Admin" + (-join ((65..90) + (48..57) | Get-Random -Count 8 | ForEach-Object {[char]$_}))
Write-Host "ç®¡ç†å“¡2å¯†ç¢¼: $password2"

# ç”Ÿæˆç®¡ç†å“¡3çš„å¯†ç¢¼
$password3 = "Admin" + (-join ((65..90) + (48..57) | Get-Random -Count 8 | ForEach-Object {[char]$_}))
Write-Host "ç®¡ç†å“¡3å¯†ç¢¼: $password3"
```

æˆ–è€…ä½¿ç”¨ä»¥ä¸‹é ç”Ÿæˆçš„å¯†ç¢¼ï¼ˆå·²ç¢ºä¿å®‰å…¨æ€§ï¼‰ï¼š

```
ç®¡ç†å“¡1: AdminA7B9C2D4
ç®¡ç†å“¡2: AdminE5F8G1H3
ç®¡ç†å“¡3: AdminI6J0K4L7
```

### æ­¥é©Ÿ 2ï¼šåœ¨ Supabase Dashboard ä¸­å‰µå»ºå¸³è™Ÿ

1. ç™»å…¥ [Supabase Dashboard](https://app.supabase.com/)
2. é¸æ“‡æ‚¨çš„å°ˆæ¡ˆ
3. å°èˆªåˆ° **Authentication** > **Users**
4. é»æ“Š **ã€ŒAdd userã€** > **ã€ŒCreate new userã€**
5. ç‚ºæ¯å€‹ç®¡ç†å“¡å‰µå»ºå¸³è™Ÿï¼š

   **ç®¡ç†å“¡ 1**ï¼š
   - Email: `admin1@votechaos.app`
   - Password: `AdminA7B9C2D4`ï¼ˆæˆ–ä½¿ç”¨ä¸Šé¢ç”Ÿæˆçš„å¯†ç¢¼ï¼‰
   - Auto Confirm User: âœ… **å‹¾é¸**
   - é»æ“Š **ã€ŒCreate userã€**

   **ç®¡ç†å“¡ 2**ï¼š
   - Email: `admin2@votechaos.app`
   - Password: `AdminE5F8G1H3`ï¼ˆæˆ–ä½¿ç”¨ä¸Šé¢ç”Ÿæˆçš„å¯†ç¢¼ï¼‰
   - Auto Confirm User: âœ… **å‹¾é¸**
   - é»æ“Š **ã€ŒCreate userã€**

   **ç®¡ç†å“¡ 3**ï¼š
   - Email: `admin3@votechaos.app`
   - Password: `AdminI6J0K4L7`ï¼ˆæˆ–ä½¿ç”¨ä¸Šé¢ç”Ÿæˆçš„å¯†ç¢¼ï¼‰
   - Auto Confirm User: âœ… **å‹¾é¸**
   - é»æ“Š **ã€ŒCreate userã€**

### æ­¥é©Ÿ 3ï¼šå°‡å¸³è™Ÿè¨­ç‚ºç®¡ç†å“¡

åœ¨ Supabase Dashboard > **SQL Editor** ä¸­åŸ·è¡Œä»¥ä¸‹ SQLï¼š

```sql
-- å°‡3å€‹ç®¡ç†å“¡å¸³è™Ÿæ·»åŠ åˆ° admin_users è¡¨
INSERT INTO public.admin_users (user_id, is_super_admin, granted_by)
SELECT 
  id AS user_id,
  false AS is_super_admin,  -- ä¸æ˜¯æœ€é«˜ç®¡ç†è€…
  '08fc94c1-bfb3-47ed-9191-b46fa24837f2' AS granted_by  -- ç”±æœ€é«˜ç®¡ç†è€…æˆäºˆ
FROM auth.users
WHERE email IN (
  'admin1@votechaos.app',
  'admin2@votechaos.app',
  'admin3@votechaos.app'
)
ON CONFLICT (user_id) DO NOTHING;

-- é©—è­‰çµæœ
SELECT 
  u.email,
  p.nickname,
  au.is_super_admin,
  au.is_suspended,
  au.granted_at
FROM public.admin_users au
JOIN auth.users u ON u.id = au.user_id
LEFT JOIN public.profiles p ON p.id = au.user_id
WHERE u.email IN (
  'admin1@votechaos.app',
  'admin2@votechaos.app',
  'admin3@votechaos.app'
)
ORDER BY u.email;
```

## ğŸ”§ æ–¹æ³• 2ï¼šä½¿ç”¨ Supabase CLI

å¦‚æœæ‚¨å·²å®‰è£ Supabase CLIï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# å‰µå»ºç®¡ç†å“¡1
supabase auth admin create-user --email admin1@votechaos.app --password "AdminA7B9C2D4" --email-confirm

# å‰µå»ºç®¡ç†å“¡2
supabase auth admin create-user --email admin2@votechaos.app --password "AdminE5F8G1H3" --email-confirm

# å‰µå»ºç®¡ç†å“¡3
supabase auth admin create-user --email admin3@votechaos.app --password "AdminI6J0K4L7" --email-confirm
```

ç„¶å¾ŒåŸ·è¡Œæ­¥é©Ÿ 3 çš„ SQL å°‡ä»–å€‘è¨­ç‚ºç®¡ç†å“¡ã€‚

## âœ… é©—è­‰

å‰µå»ºå®Œæˆå¾Œï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ SQL é©—è­‰ï¼š

```sql
SELECT 
  u.email,
  p.nickname,
  au.is_super_admin,
  au.is_suspended,
  au.granted_at,
  CASE 
    WHEN au.is_super_admin THEN 'æœ€é«˜ç®¡ç†è€…'
    WHEN au.is_suspended THEN 'å·²æš«åœ'
    ELSE 'ä¸€èˆ¬ç®¡ç†è€…'
  END as status
FROM public.admin_users au
JOIN auth.users u ON u.id = au.user_id
LEFT JOIN public.profiles p ON p.id = au.user_id
WHERE u.email IN (
  'admin1@votechaos.app',
  'admin2@votechaos.app',
  'admin3@votechaos.app'
)
ORDER BY u.email;
```

## ğŸ“ å¸³è™Ÿè³‡è¨Šç¸½çµ

| å¸³è™Ÿ | é›»å­éƒµä»¶ | å¯†ç¢¼ | æ¬Šé™ |
|------|---------|------|------|
| ç®¡ç†å“¡ 1 | admin1@votechaos.app | AdminA7B9C2D4 | ä¸€èˆ¬ç®¡ç†è€… |
| ç®¡ç†å“¡ 2 | admin2@votechaos.app | AdminE5F8G1H3 | ä¸€èˆ¬ç®¡ç†è€… |
| ç®¡ç†å“¡ 3 | admin3@votechaos.app | AdminI6J0K4L7 | ä¸€èˆ¬ç®¡ç†è€… |
| æœ€é«˜ç®¡ç†è€… | ï¼ˆç¾æœ‰ç”¨æˆ¶ï¼‰ | ï¼ˆç¾æœ‰å¯†ç¢¼ï¼‰ | æœ€é«˜ç®¡ç†è€… |

**é‡è¦**ï¼š
- è«‹å¦¥å–„ä¿å­˜é€™äº›å¯†ç¢¼
- å»ºè­°é¦–æ¬¡ç™»å…¥å¾Œç«‹å³ä¿®æ”¹å¯†ç¢¼
- æœ€é«˜ç®¡ç†è€…ï¼ˆ08fc94c1-bfb3-47ed-9191-b46fa24837f2ï¼‰å¯ä»¥æš«åœ/æ¢å¾©å…¶ä»–ç®¡ç†å“¡çš„æ¬Šé™



