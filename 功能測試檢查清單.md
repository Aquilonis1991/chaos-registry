# ✅ 功能測試檢查清單

> **執行時間**: 等待 10-30 秒後開始測試  
> **測試範圍**: 核心功能驗證

---

## 🔍 測試前準備

### 1. 確認 Schema Cache 已更新
- [x] 已執行 `檢查系統狀態.sql`
- [ ] 已等待 10-30 秒
- [ ] 已刷新瀏覽器頁面（Ctrl+F5 強制刷新）
- [ ] 已清除瀏覽器緩存（可選）

### 2. 確認登入狀態
- [ ] 已登入測試帳號
- [ ] 確認帳號有管理員權限（如需測試管理功能）

---

## 🧪 用戶功能測試

### 主題相關
- [ ] **創建主題**
  - 填寫完整資訊
  - 選擇類別和標籤
  - 點擊送出
  - **預期**: 成功創建並顯示在首頁

- [ ] **查看主題列表**
  - 進入首頁
  - 切換「熱門/最新/參與過」
  - **預期**: 顯示真實主題列表

- [ ] **查看主題詳情**
  - 點擊任一主題
  - 查看選項和投票結果
  - **預期**: 顯示完整主題資訊

### 投票相關
- [ ] **代幣投票**
  - 選擇選項
  - 輸入投票數量（1-1000）
  - 點擊投票
  - **預期**: 扣除代幣，更新投票結果

- [ ] **免費投票**
  - 選擇選項
  - 點擊「免費投票」
  - **預期**: 成功投票，顯示「今日已使用免費投票」

- [ ] **自訂投票數量**
  - 輸入 50 代幣
  - 點擊投票
  - **預期**: 成功扣除 50 代幣

### 檢舉功能
- [ ] **檢舉主題**
  - 進入主題詳情頁
  - 點擊「檢舉」
  - 選擇檢舉類型
  - 填寫原因
  - 提交
  - **預期**: 顯示「檢舉成功！我們會盡快審核您的檢舉」
  - **注意**: 不應顯示檢舉數或自動隱藏條件

- [ ] **檢舉用戶**
  - 進入用戶資料頁
  - 點擊「檢舉」
  - 選擇檢舉類型
  - 提交
  - **預期**: 顯示成功訊息

### 任務系統
- [ ] **每日簽到**
  - 進入任務頁面
  - 點擊「立即簽到」
  - **預期**: 成功簽到並獲得獎勵

- [ ] **觀看廣告**
  - 點擊「觀看廣告」
  - 等待廣告完成（30秒）
  - **預期**: 獲得代幣獎勵

---

## 🔧 管理功能測試

### 用戶管理
- [ ] **查看用戶列表**
  - 進入後台 → 用戶管理
  - **預期**: 顯示所有用戶

- [ ] **搜尋用戶**
  - 輸入用戶名稱或 ID
  - **預期**: 顯示搜尋結果

- [ ] **派發代幣**
  - 選擇用戶
  - 點擊「派發獎勵」
  - 輸入代幣數量
  - 提交
  - **預期**: 成功派發，用戶代幣增加

- [ ] **設置限制**
  - 選擇用戶
  - 點擊「設置限制」
  - **預期**: 自動切換到「用戶限制」Tab 並預選該用戶

### 用戶限制管理
- [ ] **查看用戶限制**
  - 進入後台 → 用戶限制
  - 選擇用戶
  - **預期**: 顯示該用戶的所有限制

- [ ] **添加限制**
  - 選擇限制類型（發起主題/投票/完成任務等）
  - 填寫原因
  - 提交
  - **預期**: 成功添加限制

- [ ] **移除限制**
  - 選擇現有限制
  - 點擊「移除限制」
  - **預期**: 成功移除限制

### 主題管理
- [ ] **隱藏主題**
  - 進入後台 → 主題管理
  - 選擇主題
  - 點擊「隱藏」
  - **預期**: 主題在前台不再顯示

- [ ] **解除隱藏**
  - 選擇已隱藏主題
  - 點擊「解除隱藏」
  - **預期**: 主題重新在前台顯示

- [ ] **刪除主題**
  - 選擇主題
  - 點擊「刪除」
  - 確認
  - **預期**: 主題被永久刪除

### 檢舉管理
- [ ] **查看檢舉記錄**
  - 進入後台 → 檢舉管理 → 檢舉記錄
  - **預期**: 顯示所有檢舉記錄

- [ ] **查看被檢舉主題**
  - 進入後台 → 檢舉管理 → 被檢舉主題
  - **預期**: 顯示所有被檢舉的主題及檢舉數

- [ ] **處理自動隱藏的主題**
  - 查看被檢舉主題列表
  - 找到 `auto_hidden = true` 的主題
  - **預期**: 顯示該主題已被自動隱藏

---

## ⚠️ 常見錯誤檢查

### Schema Cache 相關錯誤
- [ ] **PGRST202 錯誤**
  - 如果出現「Could not find the function...」
  - **解決**: 執行 `刷新Schema Cache.sql` 並等待 30 秒

- [ ] **欄位不存在錯誤**
  - 如果出現「Could not find the column...」
  - **解決**: 執行對應的修復腳本（如 `修復主題隱藏欄位.sql`）

### 功能限制錯誤
- [ ] **用戶限制檢查**
  - 如果功能被限制，應顯示限制原因
  - **預期**: 顯示「XXX 功能已被暫停」的錯誤訊息

### 檢舉功能錯誤
- [ ] **檢舉失敗**
  - 如果出現「檢舉功能尚未初始化」
  - **解決**: 執行 `修復檢舉功能.sql`

---

## ✅ 測試完成檢查

### 核心功能
- [ ] 所有用戶功能正常
- [ ] 所有管理功能正常
- [ ] 沒有 PGRST202 錯誤
- [ ] 沒有欄位不存在錯誤

### 特殊情況
- [ ] 自動隱藏機制正常（10次檢舉）
- [ ] 用戶限制檢查正常
- [ ] Schema Cache 刷新正常

---

## 📝 測試結果記錄

**測試日期**: ___________  
**測試人員**: ___________  
**測試結果**: 
- [ ] 全部通過
- [ ] 部分通過（請記錄失敗項目）
- [ ] 全部失敗（請記錄錯誤訊息）

**失敗項目**:
1. 
2. 
3. 

**錯誤訊息**:
```
（請貼上錯誤訊息）
```

---

**測試完成後，請將結果提供給我以便進一步協助！**

