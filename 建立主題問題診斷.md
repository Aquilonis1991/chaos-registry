# 🔍 建立主題問題診斷

## 📝 請提供以下資訊

為了幫您解決「無法正常建立主題」的問題，我需要更多細節：

### 1. 具體症狀是什麼？

請選擇最接近的情況：

#### A. 無法點擊「送出主題」按鈕
- [ ] 按鈕是灰色的（disabled）
- [ ] 按鈕沒有反應
- [ ] 其他：_______

#### B. 點擊後沒有反應
- [ ] 按鈕按下去但沒有載入動畫
- [ ] 沒有錯誤訊息
- [ ] 頁面沒有任何變化

#### C. 顯示錯誤訊息
- [ ] 請告訴我錯誤訊息內容：_______

#### D. 其他問題
- [ ] 請描述：_______

### 2. 當前狀態檢查

請確認以下幾點：

#### ✅ 基本條件
- [ ] 已經成功登入（能看到右上角的代幣數量）
- [ ] 有足夠的代幣（至少 30 個）
- [ ] 填寫了主題標題
- [ ] 填寫了至少 2 個選項

#### 🌐 網路連接
- [ ] 能夠訪問 http://localhost:8080/
- [ ] 能夠登入/註冊
- [ ] 能夠瀏覽其他頁面

#### 🔍 瀏覽器控制台
請按 F12 打開開發者工具，查看：
1. **Console 標籤**：有沒有紅色錯誤訊息？
2. **Network 標籤**：點擊送出後，有沒有紅色的請求失敗？

## 🛠️ 常見問題與解決方法

### 問題 1：代幣不足
**症狀**：送出按鈕是灰色的

**解決**：
1. 查看右上角的代幣數量
2. 如果不足，前往「任務」頁面
3. 完成「每日登入」或「觀看廣告」任務獲得代幣

### 問題 2：CORS 錯誤
**症狀**：F12 控制台顯示 CORS 相關錯誤

**檢查**：
- 開發伺服器的 port 是 8080 嗎？
- Edge Functions 是否已部署到 Supabase？

**解決**：
已確認 port 8080 在允許清單中。

### 問題 3：驗證失敗
**症狀**：顯示「請檢查輸入資料」

**檢查**：
- [ ] 主題標題：1-50 字
- [ ] 主題說明：0-150 字
- [ ] 選項數量：2-10 個
- [ ] 每個選項：不能為空
- [ ] 分類：必須選擇
- [ ] 標籤：最多 5 個

### 問題 4：未登入
**症狀**：顯示「請先登入」

**解決**：
1. 點擊右上角登入
2. 或重新整理頁面

### 問題 5：Supabase 連接問題
**症狀**：Network 標籤顯示請求失敗

**檢查**：
1. 網路連接是否正常
2. Supabase 專案是否啟用
3. Edge Functions 是否已部署

## 🔍 詳細診斷步驟

### 步驟 1：開啟瀏覽器開發者工具
```
按 F12 或 Ctrl+Shift+I
```

### 步驟 2：前往建立主題頁面
```
http://localhost:8080/create-topic
```

### 步驟 3：填寫表單
1. 主題標題：測試主題
2. 主題說明：這是測試
3. 選項 1：選項A
4. 選項 2：選項B
5. 選擇分類
6. 點擊送出

### 步驟 4：查看錯誤
**在 Console 標籤中**：
- 有紅色錯誤嗎？
- 錯誤訊息是什麼？

**在 Network 標籤中**：
- 過濾「create-topic」
- 狀態碼是什麼？（200, 400, 403, 500?）
- 點擊該請求，查看「Response」標籤的內容

### 步驟 5：提供資訊
請告訴我：
```
1. 錯誤訊息（Console）：
2. HTTP 狀態碼（Network）：
3. Response 內容：
4. 您的代幣數量：
```

## 🚀 快速測試

### 測試 1：確認登入狀態
```javascript
// 在瀏覽器 Console 中執行
localStorage.getItem('sb-epyykzxxglkjombvozhr-auth-token')
```
如果返回 null，需要重新登入。

### 測試 2：確認 Supabase 連接
```javascript
// 前往任意頁面，在 Console 查看
// 是否有 Supabase 相關錯誤
```

### 測試 3：確認 Edge Function
在瀏覽器中直接測試（需要先登入）：
```
打開 Network 標籤
點擊建立主題
查看 create-topic 請求的詳情
```

## 📋 回報格式

請用以下格式回報問題：

```
【症狀】
具體發生什麼：（例如：點擊送出後沒有反應）

【錯誤訊息】
Console 錯誤：（貼上紅色錯誤）
Network 狀態：（例如：403 Forbidden）

【當前狀態】
已登入：是/否
代幣數量：__個
填寫內容：（標題、選項等）

【瀏覽器】
使用的瀏覽器：Chrome / Edge / Firefox / Safari
```

---

**目前狀態**：Web 伺服器正在運行  
**訪問地址**：http://localhost:8080/  
**等待**：具體的錯誤訊息或症狀描述



