# 🔑 設定 Supabase 環境變數

## ❌ 問題

專案連接到錯誤的 Supabase 專案：
- **應該連接**：`epyykzxxglkjombvozhr`
- **實際連接**：`idfqzcsxvuxperxfieam`

## ✅ 解決方法

### 步驟 1：取得正確的 API 資訊

1. **前往** https://supabase.com/dashboard
2. **選擇** Project ID 為 `epyykzxxglkjombvozhr` 的專案
3. **Settings**（左下角齒輪）→ **API**
4. **複製以下資訊**：
   - **Project URL**: `https://epyykzxxglkjombvozhr.supabase.co`
   - **anon public** key（在 "Project API keys" 區域）

### 步驟 2：建立環境變數檔案

專案根目錄已經有 `.env.local` 檔案，請編輯它：

1. **打開** `.env.local` 檔案
2. **替換內容**為：

```env
VITE_SUPABASE_URL=https://epyykzxxglkjombvozhr.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=您從Dashboard複製的anon_key
```

### 步驟 3：重新啟動開發伺服器

**重要**：環境變數更改後必須重啟！

1. **回到終端機**
2. **按 Ctrl+C** 停止 `npm run dev`
3. **重新執行** `npm run dev`
4. **等待**伺服器啟動

### 步驟 4：驗證

1. **打開** http://localhost:8080/
2. **F12** 開啟 Console
3. **輸入**：
```javascript
import.meta.env.VITE_SUPABASE_URL
```
4. **應該顯示**：`"https://epyykzxxglkjombvozhr.supabase.co"`

## 📋 完整範例

`.env.local` 檔案內容範例：

```env
# Supabase 配置
VITE_SUPABASE_URL=https://epyykzxxglkjombvozhr.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVweXlrenhneGxram9tYnZvemhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTAxMjM0NTYsImV4cCI6MjAwNTY5OTQ1Nn0.xxxxxxxxxxxxxxxxxxxxx
```

**注意**：
- API Key 是一長串以 `eyJ` 開頭的字串
- 不要加引號
- 每行一個設定
- 不要有多餘的空格

## ⚠️ 常見錯誤

### 錯誤 1：檔案名稱錯誤
- ❌ `.env` 
- ❌ `env.local`
- ✅ `.env.local`（正確）

### 錯誤 2：沒有重啟伺服器
環境變數更改後**必須**重啟 `npm run dev`！

### 錯誤 3：使用錯誤的 Key
要使用 **anon public** key，不是：
- ❌ service_role key（這是私密的）
- ❌ JWT secret
- ✅ anon public key（正確）

## 🎯 修復後的流程

1. ✅ 設定正確的環境變數
2. ✅ 重啟開發伺服器
3. ✅ 確認連接到 `epyykzxxglkjombvozhr`
4. ✅ 在該專案執行 `00-完整資料庫架構.sql`
5. ✅ 測試建立主題功能

---

**立即行動**：
1. 編輯 `.env.local`
2. 設定正確的 URL 和 API Key
3. 重啟 `npm run dev`



