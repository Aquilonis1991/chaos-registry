# 🌐 部署網站版後台指南

## 📋 問題說明

**目前狀況**：
- 開發環境使用 `npm run dev` 運行本機伺服器
- 本機伺服器關閉後，網站就無法訪問
- 後台功能需要網站一直運行才能使用

**解決方案**：
將網站部署到雲端主機，這樣就不需要本機伺服器一直開著。

---

## 🎯 兩種環境對比

| 項目 | 開發環境（目前） | 生產環境（建議） |
|------|----------------|----------------|
| **運行方式** | `npm run dev` | 部署到雲端主機 |
| **訪問網址** | `http://localhost:8080` | `https://your-domain.com` |
| **需要本機開機** | ✅ 是 | ❌ 否 |
| **24小時運行** | ❌ 否（本機關機就停止） | ✅ 是（雲端主機） |
| **適合用途** | 開發測試 | 正式使用 |

---

## 🚀 推薦部署方案

### 方案 1：Vercel（推薦，免費且簡單）

**優點**：
- ✅ 完全免費（個人專案）
- ✅ 自動 HTTPS
- ✅ 自動部署（連接 GitHub）
- ✅ 全球 CDN
- ✅ 簡單易用

**步驟**：

1. **準備代碼**
   ```bash
   # 確保代碼已推送到 GitHub
   git add .
   git commit -m "準備部署"
   git push
   ```

2. **註冊 Vercel**
   - 訪問：https://vercel.com
   - 使用 GitHub 帳號登入

3. **部署專案**
   - 點擊 "New Project"
   - 選擇你的 GitHub 倉庫
   - 設定：
     - **Framework Preset**: Vite
     - **Root Directory**: `./`（或留空）
     - **Build Command**: `npm run build`
     - **Output Directory**: `dist`
   - 添加環境變數：
     - `VITE_SUPABASE_URL`: `https://epyykzxxglkjombvozhr.supabase.co`
     - `VITE_SUPABASE_PUBLISHABLE_KEY`: （你的 API Key）
   - 點擊 "Deploy"

4. **完成**
   - 等待 1-2 分鐘
   - 獲得網址：`https://your-project.vercel.app`
   - 可以自訂網域

---

### 方案 2：Netlify（免費，功能豐富）

**優點**：
- ✅ 完全免費
- ✅ 自動 HTTPS
- ✅ 表單處理（如果需要）
- ✅ 簡單拖放部署

**步驟**：

1. **註冊 Netlify**
   - 訪問：https://netlify.com
   - 使用 GitHub 帳號登入

2. **部署方式 A：連接 GitHub（推薦）**
   - 點擊 "Add new site" → "Import an existing project"
   - 選擇 GitHub 倉庫
   - 設定：
     - **Build command**: `npm run build`
     - **Publish directory**: `dist`
   - 添加環境變數（Site settings → Environment variables）
   - 點擊 "Deploy site"

3. **部署方式 B：拖放部署（快速測試）**
   ```bash
   # 先建置
   npm run build
   
   # 然後在 Netlify 網站上拖放 dist 資料夾
   ```

---

### 方案 3：Supabase Hosting（與 Supabase 整合）

**優點**：
- ✅ 與 Supabase 完美整合
- ✅ 免費方案可用
- ✅ 簡單配置

**步驟**：

1. **在 Supabase Dashboard**
   - 訪問：https://supabase.com/dashboard
   - 選擇專案：`epyykzxxglkjombvozhr`
   - 左側選單 → **Hosting**（如果可用）

2. **連接 GitHub 倉庫**
   - 授權 GitHub
   - 選擇倉庫
   - 設定建置命令

---

### 方案 4：其他選項

- **GitHub Pages**（免費，但需要手動配置）
- **Cloudflare Pages**（免費，快速）
- **AWS Amplify**（免費方案可用）
- **Firebase Hosting**（免費方案可用）

---

## 📝 部署前準備

### 1. 檢查環境變數

確保 `.env.local` 包含：
```env
VITE_SUPABASE_URL=https://epyykzxxglkjombvozhr.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=你的API_Key
```

### 2. 測試建置

```bash
npm run build
```

確認 `dist/` 資料夾生成成功。

### 3. 檢查路由配置

確保 `vite.config.ts` 中的路由配置正確（SPA 模式）。

---

## 🔧 部署後設定

### 1. 設定環境變數

在部署平台（Vercel/Netlify）的設定中，添加：
- `VITE_SUPABASE_URL`
- `VITE_SUPABASE_PUBLISHABLE_KEY`

### 2. 設定自訂網域（可選）

- 在平台設定中添加你的網域
- 按照指示設定 DNS 記錄

### 3. 測試後台功能

- 訪問：`https://your-domain.com/admin`
- 使用管理員帳號登入
- 測試所有後台功能

---

## ⚠️ 重要注意事項

### 1. 環境變數安全

- ✅ 使用 `VITE_` 前綴的變數會暴露在前端
- ✅ 這是正常的（Supabase 的 anon key 就是設計給前端使用的）
- ❌ 不要使用 `service_role` key（這是後端專用）

### 2. 後台安全

- 後台功能只在網頁版可用
- 需要管理員權限（`admin_users` 表）
- 建議使用 HTTPS

### 3. 本機開發

- 部署後，本機仍可使用 `npm run dev` 開發
- 本機和生產環境可以並存

---

## 🎯 快速部署檢查清單

- [ ] 代碼已推送到 GitHub
- [ ] 環境變數已準備好
- [ ] `npm run build` 成功
- [ ] 選擇部署平台（Vercel/Netlify）
- [ ] 設定環境變數
- [ ] 部署完成
- [ ] 測試後台登入
- [ ] 設定自訂網域（可選）

---

## 💡 推薦流程

1. **開發階段**：使用 `npm run dev` 在本機開發
2. **測試階段**：部署到 Vercel（免費，快速）
3. **正式使用**：設定自訂網域，正式上線

這樣就不需要本機伺服器一直開著了！🎉

