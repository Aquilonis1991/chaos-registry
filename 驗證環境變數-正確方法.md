# 🔍 驗證環境變數 - 正確方法

## ❌ 錯誤方法

在 Console 直接輸入這個會出錯：
```javascript
import.meta.env.VITE_SUPABASE_URL
```

**錯誤訊息**：`Uncaught SyntaxError: import.meta may only appear in a module`

**原因**：`import.meta` 只能在 ES 模組中使用，不能在 Console 直接執行。

---

## ✅ 正確驗證方法

### 方法 1：檢查 Network 請求（最簡單）

1. **打開** http://localhost:8080/
2. **按 F12** 打開開發者工具
3. **切換到 Network 標籤**
4. **重新整理頁面** (F5)
5. **查找 Supabase 的請求**

在 Network 列表中搜尋：`epyykzxxglkjombvozhr`

**應該看到類似的請求**：
```
https://epyykzxxglkjombvozhr.supabase.co/auth/v1/...
https://epyykzxxglkjombvozhr.supabase.co/rest/v1/...
```

✅ **如果看到這些請求，表示連接正確！**

---

### 方法 2：直接測試功能

最直接的方法就是實際使用：

#### 步驟 1：註冊/登入
1. **打開** http://localhost:8080/
2. **如果沒登入，點擊註冊**
3. **填寫 Email 和密碼**
4. **點擊註冊**

**預期結果**：
- ✅ 註冊成功，自動登入
- ✅ 看到個人資料頁面
- ✅ 顯示初始代幣（50 個）

#### 步驟 2：建立主題
1. **點擊首頁的 "+" 或 "建立主題"**
2. **填寫**：
   - 標題：`測試連接`
   - 說明：`測試資料庫是否正常`
   - 選項 1：`正常`
   - 選項 2：`異常`
   - 類別：選擇任一
   - 標籤：`測試`
3. **點擊 "確認建立"**

**預期結果**：
- ✅ 顯示 "建立成功"
- ✅ 跳轉到主題詳情頁
- ✅ 可以看到剛建立的主題

#### 步驟 3：投票測試
1. **在主題詳情頁**
2. **點擊 "免費投票" 或選擇代幣數量投票**
3. **選擇一個選項**
4. **點擊投票**

**預期結果**：
- ✅ 投票成功
- ✅ 票數增加
- ✅ 百分比更新

---

### 方法 3：查看 Console 錯誤

1. **F12 → Console 標籤**
2. **重新整理頁面**

**如果連接正確**：
- ✅ 沒有 Supabase 相關錯誤
- ✅ 沒有 CORS 錯誤
- ✅ 沒有 404 或 500 錯誤

**如果連接錯誤**：
- ❌ 會看到類似：`Failed to fetch`
- ❌ 或：`CORS policy blocked`
- ❌ 或：`404 Not Found`

---

### 方法 4：檢查 Supabase Dashboard

1. **前往** https://supabase.com/dashboard
2. **選擇** `epyykzxxglkjombvozhr` 專案
3. **Table Editor → profiles**

**如果註冊成功**：
- ✅ 應該看到剛註冊的用戶記錄
- ✅ 包含 email、nickname、tokens 等資料

**如果建立主題成功**：
- ✅ **Table Editor → topics**
- ✅ 應該看到剛建立的主題記錄

---

## 🎯 快速驗證流程

### 最簡單的驗證方式：

1. **打開** http://localhost:8080/
2. **F12 → Network 標籤**
3. **重新整理頁面**
4. **搜尋** `epyykzxxglkjombvozhr`
5. **看到請求** → ✅ 連接正確！

### 完整功能驗證：

1. **註冊帳號** → 成功 ✅
2. **建立主題** → 成功 ✅
3. **投票** → 成功 ✅
4. **查看 Dashboard** → 有資料 ✅

**全部成功** = 資料庫連接完全正常！🎉

---

## 🔧 常見問題

### Q: Network 中沒看到 epyykzxxglkjombvozhr？
**A**: 可能看到的是舊的 Project ID (idfqzcsxvuxperxfieam)
- 解決：完全關閉瀏覽器
- 清除快取（Ctrl+Shift+Delete）
- 重新打開

### Q: 註冊時出現錯誤？
**A**: 查看 Console 和 Network 的錯誤訊息
- 如果是 CORS 錯誤 → 檢查 Edge Functions CORS 設定
- 如果是 404 → 檢查 Project ID 是否正確
- 如果是 500 → 檢查資料庫是否初始化完成

### Q: 建立主題失敗？
**A**: 檢查：
1. Console 錯誤訊息
2. Network 中失敗的請求
3. 是否所有必要欄位都已填寫

---

## ✅ 驗證成功的標誌

如果看到以下情況，表示一切正常：

- ✅ Network 中的請求都指向 `epyykzxxglkjombvozhr.supabase.co`
- ✅ 可以成功註冊/登入
- ✅ 可以建立主題
- ✅ 可以投票
- ✅ Supabase Dashboard 中有對應的資料記錄

**全部打勾** = 資料庫連接問題徹底解決！🎊

---

**現在請嘗試註冊/登入並建立主題，告訴我結果！**


